{"version":3,"sources":["services/authentication.service.tsx","pages/public/login/login.module.scss","pages/public/login/login-image.module.scss","styles/images/modules/login/signin-image.jpg","pages/public/login/login-form.module.scss","pages/public/login/login-logo.module.scss","pages/public/login/login.yui.tsx","pages/public/login/login-image.component.tsx","pages/public/login/login-form.component.tsx","pages/public/login/login-logo.component.tsx","pages/public/login/login.hook.tsx","pages/public/login/index.tsx"],"names":["apiAxios","axios","create","headers","common","login","data","a","post","register","module","exports","LoginSchema","Yup","shape","identifier","trim","required","password","LoginImage","React","memo","history","t","useTranslation","container","spacing","item","xs","src","Logo","alt","className","styles","link","to","ROUTES","REGISTER","LoginForm","props","values","touched","errors","handleBlur","handleChange","isIdentifierError","useMemo","isPasswordError","variant","title","fullWidth","autoFocus","error","label","onChange","defaultValue","helperText","onBlur","inputProps","autoComplete","form","type","button","color","LoginLogo","HOME","logo","LogoIcon","useLoginHook","enqueueSnackbar","useSnackbar","useRecoilState","authState","auth","setAuth","useState","loading","setLoading","onSubmit","useCallback","actions","setData","hasLogin","user","locationState","location","state","push","from","ProjectList","SNACKBAR_TYPE","Error","anchorOrigin","vertical","horizontal","autoHideDuration","Login","initialValues","validationSchema","handleSubmit","rest","container__form","style","textAlign","message"],"mappings":"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","file":"static/js/4.381678a0.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst LOGIN = \"/auth/local\";\nconst REGISTER = \"/auth/local/register\";\n\nconst apiAxios = axios.create({\n  headers: {\n    common: {},\n  },\n});\n\nexport const login = async (data: { identifier: string; password: string }) => {\n  return apiAxios.post(LOGIN, data);\n};\n\nexport const register = async (data: {\n  username: string;\n  email: string;\n  password: string;\n}) => {\n  return apiAxios.post(REGISTER, data);\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__3C7nQ\",\"container__form\":\"login_container__form__vtzpq\",\"loading\":\"login_loading__15iZ2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"login-image_link__iJKM1\"};","module.exports = __webpack_public_path__ + \"static/media/signin-image.d586706c.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"login-form_title__1k_zu\",\"button\":\"login-form_button__34JrT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login-logo_container__24PMj\",\"logo\":\"login-logo_logo__1L5GQ\"};","import * as Yup from \"yup\";\n\nconst LoginSchema = Yup.object().shape({\n  identifier: Yup.string().trim().required(\"this_field_is_required\"),\n  password: Yup.string().trim().required(\"this_field_is_required\"),\n});\n\nexport default LoginSchema;\n","import React from \"react\";\nimport styles from \"./login-image.module.scss\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { ROUTES } from \"constants/navigation\";\nimport { Grid } from \"components/ui-libraries\";\nimport Logo from \"styles/images/modules/login/signin-image.jpg\";\n\nconst LoginImage = React.memo(({ history }: any) => {\n  const { t } = useTranslation([\"login\"]);\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12}>\n        <img src={Logo} alt=\"Logo\" />\n      </Grid>\n      <Grid item xs={12}>\n        <Link className={styles.link} to={ROUTES.REGISTER}>\n          {t(\"create_an_account\")}\n        </Link>\n      </Grid>\n    </Grid>\n  );\n});\n\nexport default LoginImage;\n","import React, { useMemo } from \"react\";\nimport styles from \"./login-form.module.scss\";\n\nimport { Button, Grid, TextField, Typography } from \"components/ui-libraries\";\nimport { useTranslation } from \"react-i18next\";\n\nconst LoginForm = (props: any) => {\n  const { values, touched, errors, handleBlur, handleChange } = props;\n  const { t } = useTranslation([\"login\", \"error\"]);\n\n  const isIdentifierError = useMemo(\n    () => errors.identifier && touched.identifier,\n    [errors.identifier, touched.identifier]\n  );\n  const isPasswordError = useMemo(() => errors.password && touched.password, [\n    errors.password,\n    touched.password,\n  ]);\n\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12}>\n        <Typography variant={\"h4\"} className={styles.title}>\n          {t(\"sign_in\")}\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <TextField\n          fullWidth\n          autoFocus\n          error={isIdentifierError}\n          label={t(\"username\")}\n          onChange={handleChange(\"identifier\")}\n          defaultValue={values.identifier}\n          helperText={isIdentifierError && t(`error:${errors.identifier}`)}\n          variant=\"outlined\"\n          onBlur={handleBlur}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <TextField\n          fullWidth\n          inputProps={{\n            autoComplete: \"new-password\",\n            form: {\n              autoComplete: \"off\",\n            },\n          }}\n          error={isPasswordError}\n          label={t(\"password\")}\n          defaultValue={values.password}\n          helperText={isPasswordError && t(`error:${errors.password}`)}\n          variant=\"outlined\"\n          type={\"password\"}\n          onChange={handleChange(\"password\")}\n          onBlur={handleBlur}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Button\n          className={styles.button}\n          variant=\"contained\"\n          color={\"primary\"}\n          type={\"submit\"}\n        >\n          {t(\"login\")}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport styles from \"./login-logo.module.scss\";\nimport { Link } from \"react-router-dom\";\n\nimport { ROUTES } from \"constants/navigation\";\n\nimport LogoIcon from \"styles/images/common/logo.png\";\n\nconst LoginLogo = React.memo(() => {\n  return (\n    <div className={styles.container}>\n      <Link to={ROUTES.HOME}>\n        <img className={styles.logo} src={LogoIcon} alt=\"Device\" />\n      </Link>\n    </div>\n  );\n});\n\nexport default LoginLogo;\n","import { useCallback, useState } from \"react\";\n\nimport { useTranslation } from \"react-i18next\";\nimport { useRecoilState } from \"recoil\";\nimport { useSnackbar } from \"notistack\";\n\nimport { authState } from \"store/auth\";\nimport { setData } from \"utils/auth.util\";\n\nimport { ROUTES } from \"constants/navigation\";\nimport { SNACKBAR_TYPE } from \"constants/common\";\n\nimport { login } from \"services/authentication.service\";\n\nconst useLoginHook = ({ history }: any) => {\n  const { enqueueSnackbar } = useSnackbar();\n  const { t } = useTranslation([\"login\", \"common\"]);\n  const [auth, setAuth] = useRecoilState(authState);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const onSubmit = useCallback(\n    async (values: any, actions) => {\n      try {\n        setLoading(true);\n\n        const { data }: any = await login(values);\n\n        // Store in localstorage\n        setData(data);\n\n        // Update recoiljs\n        setAuth({\n          hasLogin: true,\n          user: data.user,\n        });\n\n        try {\n          const locationState = history.location.state;\n\n          history.push(locationState.from || ROUTES.ProjectList);\n        } catch (error) {}\n      } catch (e) {\n        enqueueSnackbar(t(\"login_failed\"), {\n          variant: SNACKBAR_TYPE.Error,\n          anchorOrigin: {\n            vertical: \"top\",\n            horizontal: \"center\",\n          },\n          autoHideDuration: 3000,\n        });\n\n        setLoading(false);\n      }\n    },\n    [t, history, enqueueSnackbar, setAuth]\n  );\n\n  return { loading, hasLogin: auth.hasLogin, onSubmit };\n};\n\nexport default useLoginHook;\n","import React from \"react\";\nimport styles from \"./login.module.scss\";\n\nimport { useTranslation } from \"react-i18next\";\nimport { Redirect } from \"react-router-dom\";\nimport { Formik } from \"formik\";\n\nimport { ROUTES } from \"constants/navigation\";\n\nimport { Grid } from \"components/ui-libraries\";\nimport { DefaultProgress } from \"components/ui-own\";\n\nimport LoginSchema from \"./login.yui\";\nimport LoginImage from \"./login-image.component\";\nimport LoginForm from \"./login-form.component\";\nimport LoginLogo from \"./login-logo.component\";\n\nimport useLoginHook from \"./login.hook\";\n\n// Load before access home page, improve user experience\nimport(/* webpackPrefetch: true */ \"pages/private/project-list\");\nimport(/* webpackPrefetch: true */ \"pages/public/register\");\n\nconst Login = ({ history }: any) => {\n  const { t } = useTranslation([\"login\", \"common\"]);\n  const { hasLogin, loading, onSubmit } = useLoginHook({ history });\n\n  if (hasLogin) {\n    return <Redirect to={ROUTES.ProjectList} />;\n  }\n\n  return (\n    <Formik\n      initialValues={{ identifier: \"nttn9x\", password: \"123456\" }}\n      validationSchema={LoginSchema}\n      onSubmit={onSubmit}\n    >\n      {({ handleSubmit, ...rest }) => {\n        return (\n          <form className={styles.container} onSubmit={handleSubmit}>\n            <div className={styles.container__form}>\n              <Grid container spacing={3}>\n                <Grid item xs={6} style={{ textAlign: \"center\" }}>\n                  <LoginImage />\n                </Grid>\n                <Grid item xs={6}>\n                  <LoginLogo />\n                  {loading ? (\n                    <div className={styles.loading}>\n                      <DefaultProgress message={t(\"common:please_wait\")} />\n                    </div>\n                  ) : (\n                    <LoginForm {...rest} />\n                  )}\n                </Grid>\n              </Grid>\n            </div>\n          </form>\n        );\n      }}\n    </Formik>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}
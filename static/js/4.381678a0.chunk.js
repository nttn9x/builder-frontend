(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{1e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(426),r=n.n(a),o=n(972),i=n(159),c=n.n(i).a.create({headers:{common:{}}}),l=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.post("/auth/local",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.post("/auth/local/register",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},1175:function(e,t,n){e.exports={container:"login_container__3C7nQ",container__form:"login_container__form__vtzpq",loading:"login_loading__15iZ2"}},1182:function(e,t,n){e.exports={link:"login-image_link__iJKM1"}},1183:function(e,t,n){e.exports=n.p+"static/media/signin-image.d586706c.jpg"},1184:function(e,t,n){e.exports={title:"login-form_title__1k_zu",button:"login-form_button__34JrT"}},1185:function(e,t,n){e.exports={container:"login-logo_container__24PMj",logo:"login-logo_logo__1L5GQ"}},1195:function(e,t,n){"use strict";n.r(t);var a=n(32),r=n(0),o=n.n(r),i=n(1175),c=n.n(i),l=n(969),s=n(33),u=n(1038),m=n(50),d=n(7),f=n(210),p=n(1035),b=p.a().shape({identifier:p.b().trim().required("this_field_is_required"),password:p.b().trim().required("this_field_is_required")}),g=n(1182),h=n.n(g),_=n(115),E=n(1183),v=n.n(E),j=o.a.memo((function(e){e.history;var t=Object(l.a)(["login"]).t;return o.a.createElement(d.o,{container:!0,spacing:3},o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement("img",{src:v.a,alt:"Logo"})),o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement(_.b,{className:h.a.link,to:m.a.REGISTER},t("create_an_account"))))})),w=n(1184),x=n.n(w),O=function(e){var t=e.values,n=e.touched,a=e.errors,i=e.handleBlur,c=e.handleChange,s=Object(l.a)(["login","error"]).t,u=Object(r.useMemo)((function(){return a.identifier&&n.identifier}),[a.identifier,n.identifier]),m=Object(r.useMemo)((function(){return a.password&&n.password}),[a.password,n.password]);return o.a.createElement(d.o,{container:!0,spacing:3},o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement(d.J,{variant:"h4",className:x.a.title},s("sign_in"))),o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement(d.G,{fullWidth:!0,autoFocus:!0,error:u,label:s("username"),onChange:c("identifier"),defaultValue:t.identifier,helperText:u&&s("error:".concat(a.identifier)),variant:"outlined",onBlur:i})),o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement(d.G,{fullWidth:!0,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},error:m,label:s("password"),defaultValue:t.password,helperText:m&&s("error:".concat(a.password)),variant:"outlined",type:"password",onChange:c("password"),onBlur:i})),o.a.createElement(d.o,{item:!0,xs:12},o.a.createElement(d.b,{className:x.a.button,variant:"contained",color:"primary",type:"submit"},s("login"))))},k=n(1185),y=n.n(k),S=n(168),L=n.n(S),N=o.a.memo((function(){return o.a.createElement("div",{className:y.a.container},o.a.createElement(_.b,{to:m.a.HOME},o.a.createElement("img",{className:y.a.logo,src:L.a,alt:"Device"})))})),C=n(426),q=n.n(C),J=n(972),M=n(37),P=n(100),G=n(266),T=n(167),z=n(87),B=n(125),R=n(1e3),V=function(e){var t=e.history,n=Object(G.b)().enqueueSnackbar,a=Object(l.a)(["login","common"]).t,o=Object(P.useRecoilState)(T.a),i=Object(M.a)(o,2),c=i[0],s=i[1],u=Object(r.useState)(!1),d=Object(M.a)(u,2),f=d[0],p=d[1],b=Object(r.useCallback)(function(){var e=Object(J.a)(q.a.mark((function e(r,o){var i,c,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,Object(R.a)(r);case 4:i=e.sent,c=i.data,Object(z.d)(c),s({hasLogin:!0,user:c.user});try{l=t.location.state,t.push(l.from||m.a.ProjectList)}catch(o){}e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),n(a("login_failed"),{variant:B.f.Error,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3}),p(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[a,t,n,s]);return{loading:f,hasLogin:c.hasLogin,onSubmit:b}};Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1194)),n.e(10).then(n.bind(null,1189));t.default=function(e){var t=e.history,n=Object(l.a)(["login","common"]).t,r=V({history:t}),i=r.hasLogin,p=r.loading,g=r.onSubmit;return i?o.a.createElement(s.a,{to:m.a.ProjectList}):o.a.createElement(u.a,{initialValues:{identifier:"nttn9x",password:"123456"},validationSchema:b,onSubmit:g},(function(e){var t=e.handleSubmit,r=Object(a.a)(e,["handleSubmit"]);return o.a.createElement("form",{className:c.a.container,onSubmit:t},o.a.createElement("div",{className:c.a.container__form},o.a.createElement(d.o,{container:!0,spacing:3},o.a.createElement(d.o,{item:!0,xs:6,style:{textAlign:"center"}},o.a.createElement(j,null)),o.a.createElement(d.o,{item:!0,xs:6},o.a.createElement(N,null),p?o.a.createElement("div",{className:c.a.loading},o.a.createElement(f.c,{message:n("common:please_wait")})):o.a.createElement(O,r)))))}))}}},0,[0,1,10]]);
//# sourceMappingURL=4.381678a0.chunk.js.map